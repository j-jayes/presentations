---
title: "The Gift of Moving:"
subtitle: "Intergenerational consequences of a mobility shock"
author: "Nakamura, Sigurdsson, and Steinsson"
institute: ""
date: "2021"
output:
  xaringan::moon_reader:
    seal: false
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

class: center, inverse

```{r, echo=F, message=F}
knitr::opts_chunk$set(
  echo = F,
  warning = F,
  message = F,
  fig.align = 'center'
)
library(xaringan)
library(xaringanExtra)
library(tidyverse)
library(here)
library(xaringanthemer)

```

```{r xaringan-themer, include=FALSE, warning=FALSE}
style_duo_accent(
  secondary_color = "#bdc9e1",
  primary_color = "#0570b0",
  link_color = "#2b8cbe",
  
  header_font_google = google_font("Noto Serif JP"),
  text_font_google = google_font("Lato", "400", "400i"),
  code_font_google = google_font("IBM Plex Mono")
)
```

```{r xaringanExtra, echo=FALSE, warning=FALSE}
xaringanExtra::use_tile_view()
xaringanExtra::use_panelset()
xaringanExtra::use_progress_bar(color = "#0570b0", location = "top", height = "10px")
```

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```



## The Gift of Moving:

### Intergenerational consequences of a mobility shock

```{r, echo=FALSE, out.width="70%"}
knitr::include_graphics("images/volcano-cover-2.jpg")
```

---

### No longer a working paper!

```{r}
knitr::include_url("https://academic.oup.com/restud/advance-article/doi/10.1093/restud/rdab062/6372705")
```


---

## Authors

--

![](images/authors.PNG)

---

## Authors

.pull-left[

![](images/authors-side-by-side.PNG)

]

.pull-right[

- Use micro data to look at macro questions

- They care about labour and distributional outcomes

- Part of the [credibility revolution](https://www.vox.com/the-highlight/2019/5/14/18520783/harvard-economics-chetty) in macro

]

---
## Why is this paper relevant?

- What is it about?

- How does it contribute to the literature?

- What are the findings?

---

## What is it about?

.pull-left[

![](images/volcano.jpg)

]

.pull-right[

#### Volcano!

Lowers the cost of mobility for families whose homes destroyed. cf. Bengt's trains.

#### Compelling natural experiment

Random assignment. Binary instrument and response. 

Similar to Tancredi's paper on China, but less endogeneity!

Westman Islands are high income area, not dying town.

#### Heterogenous effects of migration

Impact on young vs old - cf. Clara.

]

---

## How does it contribute to the literature?

.pull-left[

![](images/cities-are-good.PNG)

]

.pull-right[

#### Backdrop

["Our Greatest Invention Makes Us Richer, Smarter, Greener, Healthier, and Happier"](https://youtu.be/Dsofgp01tZs) - Ed Glaeser

["The vast majority of our jobs are not in high tech, not in manufacturing; they are in the local service sector... taxi drivers and waiters, doctors, lawyers, nurses" but productivity gains in tech hubs raise wages in these professions in the localities of these high productivity sectors](https://www.econtalk.org/moretti-on-jobs-cities-and-innovation/#audio-highlights) - Enrico Moretti

]

---
class: inverse

## How does it contribute to the literature?

### Helps us to disentangle the selection effect from the returns to migration

---
## What are the findings?

.pull-left[

![](images/more-money.jpg)

Where the outcome is labour income:

**Compliers age [0-25] at time of eruption earn more over their lifetimes**

But their parents are marginally worse off
]

.pull-right[

![](images/more-schooling.jpg)

Where the outcome is schooling:

**Compliers age [0-25] at time of eruption attain more education**

]

---
## What are the findings?

.panelset[

.panel[.panel-name[Wald and 2SLS estimates]

.pull-left[

Wald estimate:

**$ 26,600**

]

.pull-right[

2SLS estimate:

**$ 27,500**

83% of the average earnings in the control group!

]

]
.panel[.panel-name[Marginal treatment effect]


```{r, fig.height=5}
df <- read_rds(here("economic-geography-reading-group", "data", "marginal-treatment-effect-df.rds"))

df %>% 
    mutate(type = "Point estimate",
           across(c(x, y), round)) %>% 
    ggplot(aes(x, y, colour = type)) +
    geom_point(cex = 4) +
    geom_line(cex = 2) +
    geom_hline(lty = 2, 
               cex = 2,
               aes(yintercept = 26700, colour = "Point estimate mean")) +
    scale_y_continuous(labels = scales::dollar_format()) +
    xaringanthemer::theme_xaringan() +
    scale_color_manual(values = c("#2b8cbe", "midnightblue")) +
    labs(x = "Quantile of income distribution",
         y = "Treatment effect ($)",
         colour = NULL) +
    theme(legend.position = "bottom")
```

]

.panel[.panel-name[Lifetime earnings effects]


]
]



---
## Setting

```{r, fig, out.width="80%", fig.cap="The Eldfell Eruption of 1973 - The Atlantic"}
knitr::include_graphics("images/volcano_ash.jpg")
```

---
## Setting

```{r, out.width="60%"}
knitr::include_graphics("images/volcano_map.png")
```


---
## Instrument

Families whose houses were destroyed were more likely to move away from the Westman Islands permanently.

---
## LATE

Authors estimate the [Local Average Treatment Effect](https://www.nber.org/system/files/working_papers/t0118/t0118.pdf) for the compliers - those who were shocked by the instrument into the treatment group

The effect for the general population will be smaller as "compliers in our experiment are a subgroup of the population that is **less well matched** to living in the Westman Islands than the average person living there."

---
## LATE: Requirements

.pull-left[

- Independence assumption

- Exclusion restriction

- Monotonicity assumption

- Existence of a first stage

]

.pull-right[

![](images/imbens-angrist.jpg)

]

---
## LATE: Independence

.pull-left[

#### Requirement

- Instrument is independent of the potential outcomes and potential treatment assignment

]

.pull-left[

#### Is it met?

- House destruction was **as good as random** within the town. Spatial correlation shown to be unimportant

]

---
## LATE: Exclusion restriction

.pull-left[

#### Requirement

- Any effect of instrument on outcome must be through the treatment

- The instrument operates through a single known causal channel

]

.pull-left[

#### Is it met?

- House destruction can impact lifetime income & education only through moving away from Westman Islands

- What about the wealth shock?

- What about massive inflation?

- Etc?

]

---
## LATE: Monotonicity assumption

.pull-left[

#### Requirement

- AKA "No defiers assumption"

- We need the absence of anyone who would have left the Westman Islands but who were pushed to stay by the volcano.
]

.pull-left[

#### Is it met?

- Seems totally reasonable.

]

---
## LATE: Existence of a first stage

.pull-left[

#### Requirement

- Significant first-stage of the instrument on treatment

- Empirically testable

- Rule of thumb requires F-stat > 10

]

.pull-left[

#### Is it met?

![](images/first-stage.PNG)

]


---
## Balance tests

```{r, fig.width=4, out.width="80%"}
knitr::include_graphics("images/balance-tests.png")
```

---
## Balance tests

.pull-left[
#### Measured differences

- Houses destroyed on average 2 years older (mean of house age is 30)

- The treatment group is somewhat more likely to have been born in the Westman Islands (83% versus 78% for the control
group)

- But can't reject that this is just random noise


]

.pull-left[
#### Unobserved differences?

- Are there any reasonable sorting hypotheses that would make inhabitants of destroyed houses different?

]

---
## Balance tests

.panelset[
.panel[.panel-name[House age map]

```{r, fig.height=6}
library(haven)

df <- read_rds(here("economic-geography-reading-group", "data", "house_locations.rds"))
df_boundary <- read_rds(here("economic-geography-reading-group", "data", "boundary.rds"))

 ggplot() +
  geom_point(aes(longitude, latitude, colour = house_year, shape = destroyed), data = df, size = 2) +
  geom_tile(aes(longitude, latitude, fill = .pred_class), data = df_boundary, alpha = .1, size = 5, show.legend = F) +
  scale_color_gradient2(
    low = "#fc8d59",
    high = "#99d594",
    mid = "#ffffbf",
    midpoint = 1935
  ) +
  scale_fill_grey() +
  theme_xaringan() +
  labs(
    x = NULL,
    y = NULL,
    colour = "Year of construction",
    shape = NULL
  ) +
  theme(
    legend.position = "bottom",
    panel.grid = element_blank(),
    axis.text = element_blank()
  ) +
  guides(
    shape = guide_legend(nrow = 2),
    colour = guide_colorbar(
      barwidth = 20,
      title.position = "top"
    )
  )
```

]

.panel[.panel-name[House age density]

```{r, fig.height=6}
df %>%
  ggplot(aes(house_year, fill = destroyed)) +
  geom_density(alpha = .5) +
  scale_x_continuous(labels = scales::number_format(big.mark = "")) +
  theme_xaringan() +
  scale_fill_manual(values = c("#fc8d59", "#99d594")) +
  labs(
    x = "Year of house construction",
    y = NULL,
    fill = NULL
  ) +
    theme(legend.position = "bottom")
```

]
]

---

## Balance tests

.panelset[
.panel[.panel-name[House price map]

```{r, fig.height=6}
ggplot() +
  geom_point(aes(longitude, latitude, colour = house_total_value, shape = destroyed), data = df, size = 2) +
  geom_tile(aes(longitude, latitude, fill = .pred_class), data = df_boundary, alpha = .1, size = 5, show.legend = F) +
    scale_color_gradient2(
    low = "blue",
    high = "red",
    mid = "pink",
    midpoint = log10(40000),
    trans = "log10",
    labels = scales::dollar_format()
  ) +
    scale_fill_grey() +
    scale_shape_manual(values = c(19, 17)) +
    theme_xaringan() +
  labs(
    colour = "House value",
    shape = NULL,
    x = NULL,
    y = NULL
  ) +
    theme(legend.position = "bottom",
          panel.grid = element_blank(),
          axis.text = element_blank()) +
    guides(shape = guide_legend(nrow = 2),
           colour = guide_colorbar(barwidth = 20,
                                   title.position = "top"))
```

]

.panel[.panel-name[House price density]

```{r, fig.height=6}
df %>%
  ggplot(aes(house_total_value, fill = destroyed)) +
  geom_density(alpha = .3) +
  scale_x_log10(labels = scales::dollar_format()) +
  theme_xaringan() +
  scale_fill_manual(values = c("#2b8cbe", "darkred")) +
  labs(
    x = "House value",
    y = NULL,
    fill = NULL
  ) +
  theme(legend.position = "bottom")
```

]
]

---

## Balance tests

Because 

**House-price ~ income and wealth**, 

the authors assume that the shock is as good as randomly assigned.

---

## Estimation results: labour income

--

**Wald Estimator**

Formula:

$$ \frac{E[income_i|destroyed_i] - E[income_i|not destroyed_i]}{E[moved_i|destroyed_i] - E[moved_i|not destroyed_i]} $$
Numbers:

$$ \frac{$3,000}{11.4\%} = $26,600 $$
---

## Estimation results: labour income

**2SLS Estimator**


---
## Questions

**Inflation**

```{r}
library(readxl)

df <- read_excel(here("economic-geography-reading-group", "data", "icelandic-inflation.xlsx"))
```



