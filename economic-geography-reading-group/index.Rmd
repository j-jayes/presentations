---
title: "The Gift of Moving:"
subtitle: "Intergenerational consequences of a mobility shock"
author: "Nakamura, Sigurdsson, and Steinsson"
institute: ""
date: "2021"
output:
  xaringan::moon_reader:
    seal: false
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r, echo=F, message=F}
knitr::opts_chunk$set(
  echo = F,
  warning = F,
  message = F
)
library(xaringan)
library(xaringanExtra)
library(tidyverse)
library(here)
library(xaringanthemer)

```

```{r xaringan-themer, include=FALSE, warning=FALSE}
style_mono_accent(
  base_color = "#2b8cbe",
  header_font_google = google_font("Noto Serif JP"),
  text_font_google   = google_font("Lato", "400", "400i"),
  code_font_google   = google_font("IBM Plex Mono")
)
```

```{r xaringanExtra, echo=FALSE, warning=FALSE}
xaringanExtra::use_tile_view()
xaringanExtra::use_panelset()
xaringanExtra::use_progress_bar(color = "#0051BA", location = "top", height = "10px")
```

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

---
class: center, inverse

## The Gift of Moving:

### Intergenerational consequences of a mobility shock

```{r, echo=FALSE, out.width=500}
knitr::include_graphics("images/volcano-cover-2.jpg")
```

# Test

---

### No longer a working paper!

```{r}
knitr::include_url("https://academic.oup.com/restud/advance-article/doi/10.1093/restud/rdab062/6372705")
```


---

## Authors

--

![](images/authors.PNG)

---

## Authors

.pull-left[

![](images/authors-side-by-side.PNG)

]

.pull-right[

- Use micro data to look at macro questions

- They care about labour and distributional outcomes

- Part of the [credibility revolution](https://www.vox.com/the-highlight/2019/5/14/18520783/harvard-economics-chetty) in macro

]

---
## Why is this paper relevant?

- What is it about?

- How does it contribute to the literature?

- What are the findings?

---

## What is it about?

.pull-left[

![](images/volcano.jpg)

]

.pull-right[

#### Volcano!

#### Compelling natural experiment

Random assignment. Binary instrument and response. 

Similar to Tancredi's paper on China, but nice instrument!

#### Heterogenous effects of migration

Impact on young vs old - the group is interested in, e.g. Clara

]

---

## How does it contribute to the literature?

.pull-left[

![](images/cities-are-good.PNG)

]

.pull-right[

#### Backdrop

[**"Our Greatest Invention Makes Us Richer, Smarter, Greener, Healthier, and Happier"**](https://youtu.be/Dsofgp01tZs) - Ed Glaeser

[**"The vast majority of our jobs are not in high tech, not in manufacturing; they are in the local service sector... taxi drivers and waiters, doctors, lawyers, nurses" but productivity gains in tech hubs raise wages in these professions in the localities of these high productivity sectors**](https://www.econtalk.org/moretti-on-jobs-cities-and-innovation/#audio-highlights) - Enrico Moretti

]

---
## What are the findings?



.panelset[
.panel[.panel-name[Marginal treatment effect]


```{r, fig.height=5}
df <- read_rds(here("economic-geography-reading-group", "data", "marginal-treatment-effect-df.rds"))

df %>% 
    mutate(type = "Point estimate",
           across(c(x, y), round)) %>% 
    ggplot(aes(x, y, colour = type)) +
    geom_point(cex = 4) +
    geom_line(cex = 2) +
    geom_hline(lty = 2, 
               cex = 2,
               aes(yintercept = 26700, colour = "Point estimate mean")) +
    scale_y_continuous(labels = scales::dollar_format()) +
    xaringanthemer::theme_xaringan() +
    scale_color_manual(values = c("#2b8cbe", "midnightblue")) +
    labs(x = "Quantile of income distribution",
         y = "Treatment effect ($)",
         colour = NULL) +
    theme(legend.position = "bottom")
```

]

.panel[.panel-name[House age density]

```{r}
# df %>%
#   ggplot(aes(house_year, fill = destroyed)) +
#   geom_density(alpha = .5) +
#   scale_x_continuous(labels = scales::number_format(big.mark = "")) +
#   theme_xaringan() +
#   scale_fill_manual(values = c("#fc8d59", "#99d594")) +
#   labs(
#     x = "Year of house construction",
#     y = NULL,
#     fill = NULL
#   ) +
#     theme(legend.position = "bottom")
```

]
]
---
## Volcano



---
## Balance tests

.panelset[
.panel[.panel-name[House age map]

```{r, fig.height=6}
library(haven)

df <- read_stata(here("economic-geography-reading-group", "data", "house_info_location.dta")) %>% 
        mutate(destroyed = ifelse(destroyed == 1, "Destroyed", "Not destroyed"))

df %>% 
    ggplot(aes(longitude, latitude, colour = house_year, shape = destroyed)) +
    geom_point(size = 2) +
    scale_color_gradient2(low = "#fc8d59",
                          high = "#99d594",
                          mid = "#ffffbf",
                          midpoint = 1935) +
    theme_xaringan() +
    labs(x = NULL,
         y = NULL,
         colour = "Year of construction",
         shape = NULL) +
    theme(legend.position = "bottom",
          panel.grid = element_blank(),
          axis.text = element_blank()) +
    guides(shape = guide_legend(nrow = 2),
           colour = guide_colorbar(barwidth = 20,
                                   title.position = "top"))
```

]

.panel[.panel-name[House age density]

```{r, fig.height=6}
df %>%
  ggplot(aes(house_year, fill = destroyed)) +
  geom_density(alpha = .5) +
  scale_x_continuous(labels = scales::number_format(big.mark = "")) +
  theme_xaringan() +
  scale_fill_manual(values = c("#fc8d59", "#99d594")) +
  labs(
    x = "Year of house construction",
    y = NULL,
    fill = NULL
  ) +
    theme(legend.position = "bottom")
```

]
]

---

## Balance tests

.panelset[
.panel[.panel-name[House price map]

```{r, fig.height=6}
df %>%
  ggplot(aes(longitude, latitude, colour = house_total_value, shape = destroyed)) +
  geom_point(size = 2) +
  scale_color_gradient2(
    low = "blue",
    high = "red",
    mid = "pink",
    midpoint = log10(40000),
    trans = "log10",
    labels = scales::dollar_format()
  ) +
    scale_shape_manual(values = c(19, 17)) +
    theme_xaringan() +
  labs(
    colour = "House value",
    shape = NULL,
    x = NULL,
    y = NULL
  ) +
    theme(legend.position = "bottom",
          panel.grid = element_blank(),
          axis.text = element_blank()) +
    guides(shape = guide_legend(nrow = 2),
           colour = guide_colorbar(barwidth = 20,
                                   title.position = "top"))
```

]

.panel[.panel-name[House price density]

```{r, fig.height=6}
df %>%
  ggplot(aes(house_total_value, fill = destroyed)) +
  geom_density(alpha = .3) +
  scale_x_log10(labels = scales::dollar_format()) +
  theme_xaringan() +
  scale_fill_manual(values = c("#2b8cbe", "darkred")) +
  labs(
    x = "House value",
    y = NULL,
    fill = NULL
  ) +
  theme(legend.position = "bottom")
```

]
]

---

## Balance tests

Because 

**house-price ~ income and wealth**, 

we assume that the shock is as godd as randomly assigned.


